<div align="center">
  <img src="https://mypbres.s3.bitiful.net/favicon.svg" width="120" height="120" alt="LDStatus Pro Logo" />
  
  # 🚀 LDStatus Pro

  > **Linux.do & IDCFlare 社群增強工具** - 信任等級追蹤 · 閱讀時間統計 · 雲端同步 · 排行榜

  ![Version](https://img.shields.io/badge/version-v3.5.2.8-blue)
  ![License](https://img.shields.io/badge/license-MIT-green)
  ![Tampermonkey](https://img.shields.io/badge/Tampermonkey-✓-brightgreen)
  ![Multi-Site](https://img.shields.io/badge/Multi--Site-✓-brightgreen)
  ![Mobile](https://img.shields.io/badge/Mobile-✓-brightgreen)
  ![Code Size](https://img.shields.io/github/languages/code-size/caigg188/LDStatusPro)
  ![Stars](https://img.shields.io/github/stars/caigg188/LDStatusPro?style=flat)

  🌐 **[官網](https://ldspro.de5.net/)** | 📖 **[詳細文件](./DOCS.md)** | 🔄 **[更新日誌](./update_log.md)**

  [简体中文](./README.md) | [English](./README_EN.md) | **繁體中文**
</div>

---

## 🌟 核心功能

<table>
<tr>
<td width="50%">

### ☁️ 資料雲端同步
- **跨瀏覽器同步** - Chrome / Firefox / Edge / Safari
- **跨裝置同步** - 電腦 / 筆電 / 平板 / 手機
- **智慧資料合併** - 自動取每天的較大值
- **365天歷史恢復** - 新裝置自動恢復資料
- **升級要求歷史同步** - 所有等級使用者支援

</td>
<td width="50%">

### 🏆 閱讀排行榜
- **三榜切換** - 日榜 / 週榜 / 月榜
- **Top 50** - 展示閱讀時間前50名
- **隱私優先** - 自主選擇是否加入
- **金銀銅牌** - 前三名特殊展示
- **手動重新整理** - 5分鐘冷卻，各榜獨立

</td>
</tr>
<tr>
<td>

### ⏱️ 閱讀時間系統
- **最多10級閱讀強度** - 漸進式成就體系
- **智慧活躍偵測** - 60秒無操作自動暫停
- **動態視覺回饋** - 顏色隨強度變化
- **伺服器可設定** - 管理員可調整等級區間
- **本地快取24小時** - 離線也能顯示

</td>
<td>

### 📊 信任等級追蹤
- **即時進度顯示** - 直觀的環形進度條
- **多維度統計** - 瀏覽/閱讀/獲讚/回覆/發帖
- **智慧變化標記** - 增減即時高亮
- **365天趨勢分析** - 熱力圖/折線圖/柱狀圖
- **里程碑通知** - 5級成就解鎖提醒

</td>
</tr>
<tr>
<td>

### 🎫 回饋工單
- **便捷回饋** - 使用者資訊區一鍵提交工單
- **多種類型** - 功能建議 / BUG回饋
- **雙向溝通** - 支援使用者與管理員回覆
- **未讀提醒** - 新回覆紅點提示

</td>
<td>

### 📢 系統公告
- **滾動公告** - 客戶端頂部展示
- **多種類型** - 通知/警告/喜報
- **自動輪播** - 多條公告自動切換
- **有效期控制** - 到期自動隱藏

</td>
</tr>
<tr>
<td>

### 📋 我的活動
- **已讀歷史** - 快速回顧瀏覽過的話題
- **收藏管理** - 一鍵查看所有收藏
- **回覆記錄** - 查看回覆內容和時間
- **互動查看** - 查看 Discourse Reactions 記錄
- **按讚歷史** - 回顧讚過的內容
- **🔍 搜尋功能** - 支援標題/標籤搜尋，批次載入

</td>
<td>

### 🍉 吃瓜助手 🆕
- **AI 帖子總結** - 一鍵總結話題，簡略/詳細模式
- **追問對話** - 基於總結內容多輪問答
- **串流輸出** - AI 回覆即時顯示
- **歷史記錄** - 儲存總結，支援查看/複製/刪除
- **自訂提示詞** - 個人化 AI 行為

</td>
</tr>
<tr>
<td>

### 🍟 LDC 積分
- **餘額查看** - 顯示 credit.linux.do 積分
- **當日預估** - 基於L站積分變化預估收益
- **7日統計** - 近一週收入/支出趨勢圖
- **交易記錄** - 按時間/類型篩選
- **❤️ 贊助支持** - 2/5/10/50 LDC 四檔贊助

</td>
<td>

### 🔑 CDK 面板 🆕
- **使用者資訊** - 頭像、暱稱、信任等級、CDK分數
- **領取記錄** - 查看已領取的 CDK 專案
- **專案詳情** - 名稱、描述、剩餘數量、領取要求
- **一鍵複製** - 快速複製 CDK 內容
- **瀑布流載入** - 流暢的資料載入體驗

</td>
</tr>
</table>

---

## 🌐 支援站點

| 站點 | 信任等級 | 閱讀統計 | 雲端同步 | 排行榜 |
|:----:|:--------:|:--------:|:------:|:------:|
| **Linux.do** | ✅ | ✅ | ✅ | ✅ |
| **IDCFlare** | ✅ | ✅ | ✅ | ✅ |

> 兩站點功能完全一致，獨立 OAuth 認證，資料互不干擾

---

## 📱 全平台相容

### 響應式設計
- **大螢幕最佳化** (≥1920px) - 面板寬度 340px，字體放大
- **中等螢幕** (≤768px) - 智慧右對齊，280px 寬度
- **小螢幕裝置** (≤480px) - 精簡佈局，260px 寬度
- **超矮螢幕** (≤500px) - 自動隱藏非必要元素

### 行動裝置支援
- ✅ 觸控拖曳移動面板
- ✅ 摺疊狀態下也可拖動
- ✅ 自適應字型和間距
- ✅ 最佳化的點擊區域

---

## 🎨 UI/UX 設計

### v3.3.0 全新視覺體驗
- 🎉 **100%完成度慶祝** - 進度達成時禮炮撒花動畫
- ✨ **等級徽章動效** - 懸浮360°翻轉 + 漸變流動
- 🌈 **等級專屬配色** - Lv1灰/Lv2藍/Lv3紫青/Lv4金橙紅
- 🎨 **玻璃擬態設計** - 毛玻璃效果 + 發光邊框
- 💫 **微互動動畫** - 懸浮上浮/彈性縮放/陰影增強

### 主題系統
- 🌙 **深色主題** - 深邃背景 + 玻璃卡片
- ☀️ **淺色主題** - 透明白色系 + 優雅陰影
- 🔄 **一鍵切換** - 自動記憶使用者偏好

---

## 🔐 安全與隱私

| 特性 | 說明 |
|------|------|
| ✅ **本地儲存** | 資料儲存在瀏覽器，不強制上傳 |
| ✅ **OAuth 授權** | 使用官方帳號安全登入 |
| ✅ **XSS 防護** | 前後端完整輸入驗證 |
| ✅ **自主選擇** | 雲端同步/排行榜可選參與 |
| ✅ **隨時退出** | 可退出排行榜或登出 |
| ✅ **資料隔離** | 多帳號/多站點獨立儲存 |

---

## ⚡ 快速開始

### 1. 安裝腳本管理器

| 瀏覽器 | 推薦擴充功能 | 安裝連結 |
|--------|---------|----------|
| Chrome/Edge | Tampermonkey | [Chrome 商店](https://chrome.google.com/webstore/detail/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobblkf) |
| Firefox | Tampermonkey | [Firefox 商店](https://addons.mozilla.org/zh-TW/firefox/addon/tampermonkey/) |
| Safari (macOS) | Tampermonkey | [App Store](https://apps.apple.com/us/app/tampermonkey/id1482490089) |
| Safari (iOS) | Stay | [App Store](https://apps.apple.com/app/stay-for-safari/id1591620171) |

### 2. 安裝腳本

| 安裝方式 | 說明 | 連結 |
|---------|------|------|
| 🚀 **GitHub 直裝** | 最新版本，即時更新 | [**點擊安裝**](https://raw.githubusercontent.com/caigg188/LDStatusPro/main/LDStatusPro.user.js) |
| 📦 **GreasyFork** | 備用源，自動同步 | [GreasyFork 頁面](https://greasyfork.org/zh-TW/scripts/558575-ldstatus-pro) |

### 3. 開始使用
- 造訪 [Linux.do](https://linux.do) 或 [IDCFlare](https://idcflare.com)
- 面板自動顯示在頁面右下角
- 點擊登入啟用雲端同步和排行榜

---

## 📊 閱讀等級系統

| 等級 | 圖示 | 區間 | 顏色 |
|:----:|:----:|:----:|:----:|
| 剛起步 | 🌱 | 0-30分鐘 | 灰色 |
| 熱身中 | 📖 | 30-90分鐘 | 藍色 |
| 漸入佳境 | 📚 | 90-180分鐘 | 綠色 |
| 沉浸閱讀 | 🔥 | 180-300分鐘 | 黃色 |
| 深度學習 | ⚡ | 300-450分鐘 | 橙色 |
| LD達人 | 🏆 | 450-600分鐘 | 紫色 |
| 超級水怪 | 👑 | 600+分鐘 | 粉色 |

> 💡 管理員可在後台「系統設定」中自訂等級區間和名稱

---

## 🛠️ 技術架構

```
LDStatusPro/
├── LDStatusPro.user.js    # 客戶端腳本 (Tampermonkey)
├── backend/               # 後端服務 (Cloudflare Workers)
│   ├── src/              # 原始碼 (路由、服務、中介軟體)
│   ├── scripts/          # 資料庫遷移腳本
│   ├── docs/             # API 文件
│   └── wrangler.toml     # Workers 設定
├── admin-panel/          # 管理面板 (Vue.js)
│   ├── src/              # 前端原始碼
│   ├── views/            # 11個頁面元件
│   └── stores/           # Pinia 狀態管理
├── website/              # 官網 (React + TypeScript)
│   ├── src/              # 原始碼
│   └── hooks/            # 動態資料獲取 Hook
└── docs/                 # 專案文件
    └── technicaDocs/     # 技術文件 (4 個模組)
```

### 技術棧
- **客戶端**: 原生 JavaScript，零依賴，13000+ 行程式碼
- **後端**: Cloudflare Workers + D1 Database + R2 Storage
- **管理面板**: Vue 3 + Pinia + Vue Router 4 + Tailwind CSS
- **官網**: React 19 + TypeScript + Framer Motion + Tailwind CSS 4
- **認證**: OAuth 2.0 (超級管理員 + 子管理員雙認證)

### 後端架構 (v3.6.x)
- **快取分層**: HTTP Cache → D1 Cache → Memory Buffer → D1 Tables
- **資料緩衝**: 智慧批次寫入，減少資料庫壓力
- **定時任務**: Cron Triggers 預計算排行榜
- **備份系統**: R2 物件儲存，自動清理

### 效能最佳化
- LRU 快取歷史資料聚合
- 批次寫入合併儲存操作
- API 回應快取 + 請求去重 + 資料緩衝
- 非同步渲染避免 UI 阻塞
- 指數退避重試機制
- 前端本地快取 (5 分鐘)

---

## 📋 更新日誌

### v3.5.2.8 🛡️ 請求最佳化 & 錯誤提示

**⚡ 公共介面請求最佳化**
- 🚦 **429 限流冷卻** - 收到 429 回應後，2 分鐘內不再發起新請求
- ⏱️ **剩餘時間提示** - 冷卻期內顯示剩餘等待秒數

**💬 錯誤提示最佳化**
- 🚫 **IP 封鎖提示** - 偵測到 IP 被封鎖時，顯示友善提示
- 📡 **網路錯誤細化** - 逾時、網路錯誤、伺服器錯誤分別給出不同提示

---

### v3.5.2.x 🔑 CDK 面板 & 吃瓜對話

**🔑 新增 CDK 面板**
- 在 cdk.linux.do 頁面整合 CDK 面板
- 查看使用者資訊、領取記錄、專案詳情

**🍉 吃瓜助手增強**
- 💬 **追問對話** - 基於總結內容繼續向 AI 提問
- 💭 **上下文記憶** - 支援多輪追問
- ⚡ **串流輸出** - AI 回覆即時顯示

**🍟 LDC 積分最佳化**
- 📊 **當日預估** - 概覽頁顯示當日預估收益
- 🎨 **UI 重新設計** - 全新漸變背景、柔和光暈效果

---

### v3.5.0.x 🎉 全新功能

**✨ 吃瓜助手**
- 🍉 AI 帖子總結 / 📜 歷史記錄 / ✏️ 自訂提示詞

**📋 我的活動**
- 📖 已讀 / ⭐ 收藏 / 💬 回覆 / ❤️ 讚過 / 📝 我的話題 / 🔍 搜尋

**🍟 LDC 積分**
- 💰 積分餘額 / 📊 7日統計 / ❤️ 贊助支持

**👥 關注粉絲**
- 👀 關注列表 / 💖 粉絲列表

[查看完整更新日誌](./update_log.md)

---

## ❓ 常見問題 (FAQ)

<details>
<summary><b>❗ 面板不顯示怎麼辦？</b></summary>

如果安裝腳本後面板沒有顯示，請按以下步驟排查：

1. **啟用瀏覽器開發人員模式**
   - Chrome/Edge: 開啟 `chrome://extensions/`，開啟右上角「開發人員模式」
   - Firefox: 開啟 `about:debugging`，無需額外設定

2. **檢查油猴擴充功能設定**
   - 點擊 Tampermonkey 圖示 → 管理面板
   - 找到 LDStatus Pro 腳本，確保已啟用（開關為開啟狀態）
   - 進入「設定」→ 確保「允許使用者腳本存取的權限」設定正確

3. **重新整理頁面**
   - 完成上述設定後，重新整理 Linux.do 或 IDCFlare 頁面
   - 面板應該會出現在頁面右下角

> 💡 如果仍然不顯示，嘗試停用其他可能衝突的擴充功能後重試
</details>

<details>
<summary><b>🦊 Firefox 瀏覽器登入失敗怎麼辦？</b></summary>

部分 Firefox 使用者可能因隱私設定導致 OAuth 登入失敗（授權成功但面板無更新）。請嘗試以下排查步驟：

1. **檢查增強型追蹤保護**
   - 開啟 `about:preferences#privacy`
   - 如果設定為「嚴格」，嘗試改為「標準」

2. **檢查容器分頁** (如使用 Multi-Account Containers 擴充功能)
   - 確保授權彈窗和主頁面在**同一個容器**中
   - 或暫時在「無容器」的普通分頁中登入

3. **檢查第三方 Cookie 設定**
   - 確保沒有完全禁用第三方 Cookie
   - 可在 `about:preferences#privacy` → 「Cookie 和網站資料」中檢查

> 💡 Chrome、Edge 等瀏覽器通常不會有此問題
</details>

<details>
<summary><b>📊 閱讀時間為什麼不增加？</b></summary>

- 腳本偵測滑鼠移動、捲動、點擊等活動
- **60秒無操作**會自動暫停計時
- 恢復操作後會繼續計時
</details>

<details>
<summary><b>☁️ 雲端同步資料會覆蓋本地資料嗎？</b></summary>

- 雲端同步採用**取較大值合併**策略
- 同一天的資料，保留本地和雲端中的較大值
- 不會遺失任何已記錄的閱讀時間
</details>

---

## ⭐ Star History

<a href="https://www.star-history.com/#caigg188/LDStatusPro&Date">
 <picture>
   <source media="(prefers-color-scheme: dark)" srcset="https://api.star-history.com/svg?repos=caigg188/LDStatusPro&type=Date&theme=dark" />
   <source media="(prefers-color-scheme: light)" srcset="https://api.star-history.com/svg?repos=caigg188/LDStatusPro&type=Date" />
   <img alt="Star History Chart" src="https://api.star-history.com/svg?repos=caigg188/LDStatusPro&type=Date" />
 </picture>
</a>

---

## 🤝 貢獻

歡迎提交 Issue 和 Pull Request！

- 🐛 [回報問題](https://github.com/caigg188/LDStatusPro/issues)
- 💡 [功能建議](https://github.com/caigg188/LDStatusPro/issues)
- 📖 [詳細文件](./DOCS.md)

---

## 📄 授權條款

MIT License - 自由使用、修改和散布

---

<div align="center">

**Made with ❤️ for Linux.do Community**

[GitHub](https://github.com/caigg188/LDStatusPro) · [安裝腳本](https://raw.githubusercontent.com/caigg188/LDStatusPro/main/LDStatusPro.user.js) · [回饋問題](https://github.com/caigg188/LDStatusPro/issues)

**⭐ 如果有幫助，請給個 Star！**

</div>
