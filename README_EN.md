<div align="center">
  <img src="https://mypbres.s3.bitiful.net/favicon.svg" width="120" height="120" alt="LDStatus Pro Logo" />
  
  # ğŸš€ LDStatus Pro

> **Linux.do & IDCFlare Community Enhancement Tool** - Trust Level Tracking Â· Reading Stats Â· Cloud Sync Â· Leaderboard

![Version](https://img.shields.io/badge/version-v3.5.4.6-blue)
![License](https://img.shields.io/badge/license-MIT-green)
![Tampermonkey](https://img.shields.io/badge/Tampermonkey-âœ“-brightgreen)
![Multi-Site](https://img.shields.io/badge/Multi--Site-âœ“-brightgreen)
![Mobile](https://img.shields.io/badge/Mobile-âœ“-brightgreen)
![Code Size](https://img.shields.io/github/languages/code-size/caigg188/LDStatusPro)
![Stars](https://img.shields.io/github/stars/caigg188/LDStatusPro?style=flat)

ğŸŒ **[Website](https://ldspro.qzz.io/)** | ğŸ“– **[Documentation](./DOCS.md)** | ğŸ”„ **[Changelog](./update_log.md)**

[ç®€ä½“ä¸­æ–‡](./README.md) | **English** | [ç¹é«”ä¸­æ–‡](./README_TW.md)

</div>

---

## ğŸŒŸ Core Features

<table>
<tr>
<td width="50%">

### â˜ï¸ Cloud Data Sync

- **Cross-browser Sync** - Chrome / Firefox / Edge / Safari
- **Cross-device Sync** - Desktop / Laptop / Tablet / Mobile
- **Smart Data Merge** - Auto keeps higher value per day
- **365-day History Recovery** - Auto restore on new devices
- **Upgrade History Sync** - Supported for all user levels

</td>
<td width="50%">

### ğŸ† Reading Leaderboard

- **Three Rankings** - Daily / Weekly / Monthly
- **Top 50** - Shows top 50 by reading time
- **Privacy First** - Opt-in participation
- **Gold/Silver/Bronze** - Special display for top 3
- **Manual Refresh** - 5-min cooldown, independent per board

</td>
</tr>
<tr>
<td>

### â±ï¸ Reading Time System

- **Up to 10 Reading Levels** - Progressive achievement system
- **Smart Activity Detection** - Auto pause after 60s idle
- **Dynamic Visual Feedback** - Color changes with intensity
- **Server Configurable** - Admin can adjust level thresholds
- **24-hour Local Cache** - Works offline too

</td>
<td>

### ğŸ“Š Trust Level Tracking

- **Real-time Progress** - Intuitive circular progress bar
- **Multi-dimensional Stats** - Topics/Posts/Likes/Replies
- **Smart Change Markers** - Real-time highlight for changes
- **365-day Trend Analysis** - Heatmap/Line/Bar charts
- **Milestone Notifications** - Level 5 achievement alerts

</td>
</tr>
<tr>
<td>

### ğŸ‰ Thread Summarizer

- **AI Thread Summary** - One-click summary, brief/detailed modes
- **Follow-up Chat** - Continue asking based on summary
- **Streaming Output** - Real-time AI response display
- **History Records** - Save summaries, view/copy/delete
- **Custom Prompts** - Personalize AI behavior

</td>
<td>

### ğŸŸ LDC Credits

- **Balance View** - Show credit.linux.do balance
- **Daily Estimate** - Estimate earnings based on L-site changes
- **7-day Stats** - Weekly income/expense trend chart
- **Transaction Records** - Filter by time/type
- **â¤ï¸ Donation Support** - 2/5/10/50 LDC tiers

</td>
</tr>
<tr>
<td>

### ğŸ“‹ My Activity

- **Reading History** - Quick review of browsed topics
- **Bookmark Manager** - View all bookmarks at once
- **Reply Records** - View reply content and time
- **Interactions** - View Discourse Reactions records
- **Like History** - Review liked content
- **ğŸ” Search** - Title/tag search support

</td>
<td>

### ğŸª LD Store

- **Exchange Hub** - Virtual items and services exchange platform
- **CDK Auto Delivery** - Auto receive CDK after exchange
- **Category Browse** - AI/Storage/VPS/Consulting/Subscriptions/SMS/Services/Shop
- **Order Tracking** - View exchange records and status
- **Merchant Portal** - Bind LDC account to publish listings

</td>
</tr>
<tr>
<td>

### ğŸ”‘ CDK Panel

- **User Info** - Avatar, nickname, trust level, CDK score
- **Claim Records** - View claimed CDK projects
- **Project Details** - Name, description, remaining, requirements
- **One-click Copy** - Quick copy CDK content
- **Waterfall Loading** - Smooth data loading experience

</td>
<td>

### ğŸ« Feedback Tickets

- **Quick Feedback** - One-click ticket submission
- **Multiple Types** - Feature Request / Bug Report
- **Two-way Communication** - User and admin replies
- **Unread Notifications** - Red dot for new replies

</td>
</tr>
</table>

---

## ğŸŒ Supported Sites

|     Site     | Trust Level | Reading Stats | Cloud Sync | Leaderboard |
| :----------: | :---------: | :-----------: | :--------: | :---------: |
| **Linux.do** |     âœ…      |      âœ…       |     âœ…     |     âœ…      |
| **IDCFlare** |     âœ…      |      âœ…       |     âœ…     |     âœ…      |

> Both sites have identical features, independent OAuth authentication, isolated data

---

## ğŸ“± Cross-Platform Compatible

### Responsive Design

- **Large Screens** (â‰¥1920px) - 340px panel width, larger fonts
- **Medium Screens** (â‰¤768px) - Smart right-align, 280px width
- **Small Devices** (â‰¤480px) - Compact layout, 260px width
- **Short Screens** (â‰¤500px) - Auto hide non-essential elements

### Mobile Support

- âœ… Touch drag to move panel
- âœ… Draggable in collapsed state
- âœ… Adaptive fonts and spacing
- âœ… Optimized touch targets

---

## ğŸ¨ UI/UX Design

### New Visual Experience

- ğŸ‰ **100% Completion Celebration** - Confetti animation on progress complete
- âœ¨ **Level Badge Animation** - 360Â° flip on hover + gradient flow
- ğŸŒˆ **Level-specific Colors** - Lv1 Gray/Lv2 Blue/Lv3 Teal/Lv4 Gold-Orange-Red
- ğŸ¨ **Glassmorphism Design** - Frosted glass effect + glowing borders
- ğŸ’« **Micro-interactions** - Hover lift/elastic scale/enhanced shadows

### Theme System

- ğŸŒ™ **Dark Theme** - Deep background + glass cards
- â˜€ï¸ **Light Theme** - Transparent white + elegant shadows
- ğŸ”„ **One-click Switch** - Auto remembers user preference

---

## ğŸ” Security & Privacy

| Feature                         | Description                                     |
| ------------------------------- | ----------------------------------------------- |
| âœ… **Local Storage**            | Data stored in browser, no forced uploads       |
| âœ… **OAuth Authentication**     | Secure login with official accounts             |
| âœ… **XSS Protection**           | Full input validation and escaping front & back |
| âœ… **SQL Injection Protection** | Parameterized queries throughout                |
| âœ… **User Choice**              | Cloud sync/leaderboard are opt-in               |
| âœ… **Easy Exit**                | Can leave leaderboard or logout anytime         |
| âœ… **Data Isolation**           | Multi-account/multi-site independent storage    |

---

## âš¡ Quick Start

### 1. Install Userscript Manager

| Browser        | Recommended  | Install Link                                                                                            |
| -------------- | ------------ | ------------------------------------------------------------------------------------------------------- |
| Chrome/Edge    | Tampermonkey | [Chrome Store](https://chrome.google.com/webstore/detail/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobblkf) |
| Firefox        | Tampermonkey | [Firefox Add-ons](https://addons.mozilla.org/en-US/firefox/addon/tampermonkey/)                         |
| Safari (macOS) | Tampermonkey | [App Store](https://apps.apple.com/us/app/tampermonkey/id1482490089)                                    |
| Safari (iOS)   | Stay         | [App Store](https://apps.apple.com/app/stay-for-safari/id1591620171)                                    |

### 2. Install Script

| Method               | Description                     | Link                                                                                               |
| -------------------- | ------------------------------- | -------------------------------------------------------------------------------------------------- |
| ğŸš€ **GitHub Direct** | Latest version, instant updates | [**Install Now**](https://raw.githubusercontent.com/caigg188/LDStatusPro/main/LDStatusPro.user.js) |
| ğŸ“¦ **GreasyFork**    | Alternative source, auto sync   | [GreasyFork Page](https://greasyfork.org/en/scripts/558575-ldstatus-pro)                           |

### 3. Start Using

- Visit [Linux.do](https://linux.do) or [IDCFlare](https://idcflare.com)
- Panel appears automatically at bottom right
- Login to enable cloud sync and leaderboard
- Access "LD Store" from the LDC Credits panel

---

## ğŸ“Š Reading Level System

|      Level      | Icon |    Range    | Color  |
| :-------------: | :--: | :---------: | :----: |
|  Just Started   |  ğŸŒ±  |  0-30 min   |  Gray  |
|   Warming Up    |  ğŸ“–  |  30-90 min  |  Blue  |
| Getting Into It |  ğŸ“š  | 90-180 min  | Green  |
|    Immersed     |  ğŸ”¥  | 180-300 min | Yellow |
|  Deep Learning  |  âš¡  | 300-450 min | Orange |
|    LD Expert    |  ğŸ†  | 450-600 min | Purple |
|  Super Reader   |  ğŸ‘‘  |  600+ min   |  Pink  |

> ğŸ’¡ Admins can customize level thresholds and names in backend "System Settings"

---

## ğŸ› ï¸ Technical Architecture

```
LDStatusPro/
â”œâ”€â”€ LDStatusPro.user.js    # Client Script (Tampermonkey)
â”œâ”€â”€ backend/               # Backend Service (Cloudflare Workers)
â”‚   â”œâ”€â”€ src/              # Source Code (routes, services, middleware)
â”‚   â”œâ”€â”€ scripts/          # Database Migration Scripts
â”‚   â”œâ”€â”€ docs/             # API Documentation
â”‚   â””â”€â”€ wrangler.toml     # Workers Config
â”œâ”€â”€ admin-panel/          # Admin Panel (Vue.js)
â”‚   â”œâ”€â”€ src/              # Frontend Source
â”‚   â”œâ”€â”€ views/            # Page Components
â”‚   â””â”€â”€ stores/           # Pinia State Management
â”œâ”€â”€ website/              # Official Website (React + TypeScript)
â”‚   â”œâ”€â”€ src/              # Source Code
â”‚   â””â”€â”€ hooks/            # Dynamic Data Hooks
â””â”€â”€ docs/                 # Project Documentation
    â””â”€â”€ technicaDocs/     # Technical Docs
```

### Tech Stack

- **Client**: Native JavaScript, zero dependencies, 16000+ lines of code
- **Backend**: Cloudflare Workers + D1 Database + R2 Storage
- **Admin Panel**: Vue 3 + Pinia + Vue Router 4 + Tailwind CSS
- **Website**: React 19 + TypeScript + Framer Motion + Tailwind CSS 4
- **Auth**: OAuth 2.0 (Super Admin + Sub-admin dual authentication)

### Backend Architecture

- **Cache Layers**: HTTP Cache â†’ D1 Cache â†’ Memory Buffer â†’ D1 Tables
- **Data Buffer**: Smart batch writes, reduced DB pressure
- **Cron Jobs**: Cron Triggers for pre-computed leaderboards
- **Backup System**: R2 object storage, auto cleanup
- **Security**: 429 rate limiting + IP blacklist + honeypot detection

### Performance Optimizations

- LRU cache for historical data aggregation
- Batch write merging for storage operations
- API response cache + request deduplication + data buffering
- Async rendering to avoid UI blocking
- Exponential backoff retry mechanism
- Global request queue to prevent 429

---

## ğŸ“‹ Changelog

### v3.5.4.x ğŸª LD Store

**ğŸª Virtual Item Exchange Hub**

- ğŸ’³ **LDC Credit Exchange** - Exchange virtual items and services with LDC credits
- ğŸ“¦ **CDK Auto Delivery** - Auto receive CDK after exchange, one-click copy
- ğŸ‘¤ **Merchant Portal** - Bind LDC account to publish exchange listings
- ğŸ“‹ **Order Tracking** - View exchange records and status
- ğŸ”‘ **CDK Management** - Merchants can bulk add, view, copy CDK

**ğŸ›¡ï¸ Security Hardening**

- ğŸ”’ XSS Protection Enhanced - Fixed unescaped product names in dialogs
- ğŸ” CDK Race Condition Fixed - Atomic UPDATE to prevent overselling
- ğŸ’‰ SQL Injection Protection - Parameterized queries throughout

**ğŸ¨ UI/UX Improvements**

- ğŸ–¼ï¸ Detail page optimization - 16:9 image ratio, larger description area
- ğŸ“œ List scroll memory - Restores scroll position when returning to list
- âš ï¸ Rejection/delist reason display - Shows reasons in My Listings

---

### v3.5.2.x ğŸ”‘ CDK Panel & Request Optimization

**ğŸ”‘ New CDK Panel**

- Integrated CDK panel on cdk.linux.do page
- View user info, claim records, project details

**âš¡ Request Optimization**

- ğŸš¦ Global request queue - 300ms minimum interval to prevent 429
- â±ï¸ 429 rate limit cooldown - No new requests for 2 minutes
- ğŸ’¬ Error message improvements - Smart error type detection, friendly tips

---

### v3.5.0.x ğŸ‰ Core Features

**âœ¨ Thread Summarizer**

- ğŸ‰ AI Thread Summary / ğŸ“œ History Records / âœï¸ Custom Prompts / ğŸ’¬ Follow-up Chat

**ğŸ“‹ My Activity**

- ğŸ“– Read / â­ Bookmarks / ğŸ’¬ Replies / â¤ï¸ Liked / ğŸ“ My Topics / ğŸ” Search

**ğŸŸ LDC Credits**

- ğŸ’° Balance / ğŸ“Š 7-day Stats / ğŸ“ˆ Daily Estimate / â¤ï¸ Donation Support

[View Full Changelog](./update_log.md)

---

## â“ FAQ

<details>
<summary><b>â— Panel not showing?</b></summary>

If the panel doesn't appear after installation, try these steps:

1. **Enable Browser Developer Mode**

   - Chrome/Edge: Open `chrome://extensions/`, enable "Developer mode" at top right
   - Firefox: Open `about:debugging`, no extra settings needed

2. **Check Tampermonkey Settings**

   - Click Tampermonkey icon â†’ Dashboard
   - Find LDStatus Pro script, ensure it's enabled (switch is ON)
   - Go to "Settings" â†’ Ensure "Allowed permissions for user scripts" is correct

3. **Refresh the Page**
   - After completing above settings, refresh Linux.do or IDCFlare page
   - Panel should appear at bottom right

> ğŸ’¡ If still not showing, try disabling other potentially conflicting extensions

</details>

<details>
<summary><b>ğŸ¦Š Firefox login fails?</b></summary>

Some Firefox users may experience OAuth login failures due to privacy settings (authorization succeeds but panel doesn't update). Try these steps:

1. **Check Enhanced Tracking Protection**

   - Open `about:preferences#privacy`
   - If set to "Strict", try changing to "Standard"

2. **Check Container Tabs** (if using Multi-Account Containers extension)

   - Ensure auth popup and main page are in **the same container**
   - Or temporarily login in a regular tab without containers

3. **Check Third-party Cookie Settings**
   - Ensure third-party cookies aren't completely blocked
   - Check in `about:preferences#privacy` â†’ "Cookies and Site Data"

> ğŸ’¡ Chrome, Edge, and other browsers usually don't have this issue

</details>

<details>
<summary><b>ğŸ“Š Why isn't reading time increasing?</b></summary>

- The script detects mouse movement, scrolling, clicks, and other activity
- **60 seconds of inactivity** will auto-pause the timer
- Timer resumes when activity is detected
</details>

<details>
<summary><b>â˜ï¸ Will cloud sync overwrite local data?</b></summary>

- Cloud sync uses a **keep higher value** merge strategy
- For the same day, keeps the higher value between local and cloud
- No recorded reading time will be lost
</details>

<details>
<summary><b>ğŸª How to publish listings on LD Store?</b></summary>

1. Open the LDC Credits panel, switch to "LD Store" tab
2. Click "My Listings" â†’ "Merchant Settings"
3. Enter your LDC PID (get from credit.linux.do profile page)
4. Configure notification URL (optional, for order callbacks)
5. Save and start publishing exchange listings
</details>

---

## â­ Star History

<a href="https://www.star-history.com/#caigg188/LDStatusPro&Date">
 <picture>
   <source media="(prefers-color-scheme: dark)" srcset="https://api.star-history.com/svg?repos=caigg188/LDStatusPro&type=Date&theme=dark" />
   <source media="(prefers-color-scheme: light)" srcset="https://api.star-history.com/svg?repos=caigg188/LDStatusPro&type=Date" />
   <img alt="Star History Chart" src="https://api.star-history.com/svg?repos=caigg188/LDStatusPro&type=Date" />
 </picture>
</a>

---

## ğŸ¤ Contributing

Issues and Pull Requests are welcome!

- ğŸ› [Report Issues](https://github.com/caigg188/LDStatusPro/issues)
- ğŸ’¡ [Feature Requests](https://github.com/caigg188/LDStatusPro/issues)
- ğŸ“– [Documentation](./DOCS.md)

---

## ğŸ“„ License

MIT License - Free to use, modify, and distribute

---

<div align="center">

**Made with â¤ï¸ for Linux.do Community**

[GitHub](https://github.com/caigg188/LDStatusPro) Â· [Install Script](https://raw.githubusercontent.com/caigg188/LDStatusPro/main/LDStatusPro.user.js) Â· [Report Issues](https://github.com/caigg188/LDStatusPro/issues)

**â­ If this helps, please give it a Star!**

</div>
